package com.jctx.chat.service;

import java.sql.SQLException;

import javax.annotation.Resource;

import org.springframework.stereotype.Service;

import com.jctx.chat.Utils.ChatException;
import com.jctx.chat.dao.FriendsDao;
import com.jctx.chat.module.ChatUserBean;
import com.mysql.jdbc.exceptions.MySQLIntegrityConstraintViolationException;

@Service
public class FriendsService {

	@Resource FriendsDao friendsDao;
	public void applyAsFriends(ChatUserBean applicant, int targetUid) throws ChatException {
		try { 
			friendsDao.applyFriends(applicant, targetUid);
		} catch (SQLException ex) {
			if (ex  instanceof MySQLIntegrityConstraintViolationException) {
				throw new ChatException("重复的申请"); 
			} 
		}
	} 
}
