package com.jctx.chat.service;

import javax.annotation.Resource;

import org.json.JSONObject;
import org.springframework.stereotype.Service;
import org.springframework.web.socket.CloseStatus;
import org.springframework.web.socket.WebSocketSession;

import com.jctx.chat.module.OnlineBean;
import com.jctx.chat.module.OnlineUserEntity;
import com.jctx.chat.module.OnlineUsersManager;

@Service("jedisService")
public class RedisServiceImp implements RedisService {
	
	
	@Resource
	OnlineUsersManager onlineUserManager;

	@Override
	public void online(OnlineBean bean, WebSocketSession session) {
		
		OnlineUserEntity entity = new OnlineUserEntity(bean, session);
		
		onlineUserManager.OnlineUser(bean.getSelf(), entity);
		
	}
	
	
	@Override
	public void handleTextMessage(String payload) {
		JSONObject message = new JSONObject(payload);
	}

	@Override
	public void onffline(String sessionId, CloseStatus status) {
	}
	
}
